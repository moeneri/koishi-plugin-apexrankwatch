
# apexrankwatch

**Apex Legends 段位分数监控插件** —— 自动定时检测指定玩家的排位分数、赛季变动、异常波动并群通知。

---

## ✨ 功能简介

- 定时自动监控玩家 Apex Legends 段位分数和变化  
- 群聊内 @机器人 添加、移除、查询监控  
- 智能识别异常分数变化（如赛季重置 / 检测错误）  
- 支持全中文，带英雄、全球排名、分数变化展示  
- 黑名单管理，避免监控特定 ID  

---

## 🛠 安装方法

### Koishi 插件市场安装

在 Koishi 控制台插件市场搜索 `apexrankwatch`，一键安装即可。

---

## 📚 指令用法

### 1. 查询玩家段位
```
/apexrank <玩家名称>
```
**示例：**
```
/apexrank moeneri
```
说明：查询指定玩家的当前段位、分数、英雄、排名等信息。

---

### 2. 添加群监控
```
/apexrankwatch <玩家名称>
```
**示例：**
```
/apexrankwatch moeneri
```
说明：本群开始自动监控该玩家的分数变化，每次分数变动都会群内通知。

---

### 3. 查看监控列表
```
/apexranklist
```
说明：查看本群所有正在监控的 Apex 玩家列表、分数、排名等。

---

### 4. 移除群监控
```
/apexrankremove <玩家名称>
```
**示例：**
```
/apexrankremove moeneri
```
说明：停止本群对该玩家的分数监控。

---

### 5. 测试插件
```
/apextest
```
说明：测试插件及机器人群消息发送功能。

---

### 6. 获取帮助
```
/apexrankhelp
```
说明：显示所有指令和用法说明。

---

## 📈 分数变化与异常判定规则

- 插件每隔一定时间自动检测监控玩家分数变化  
- 正常升降分会群通知详细信息  
- 只有当玩家分数从高分（>1000）直接掉到接近 0 分（<10）时，才会判定为可能监测出错或 API 异常，避免误报赛季重置  
- 赛季重置时的大幅度下降会自动识别和提示  

---

## 🚫 黑名单功能

- 可在插件配置里设置多个黑名单 ID，英文逗号分隔  
- 黑名单 ID 不会被查询 / 监控，所有相关指令自动忽略  

---

## ❓ 常见问题

**Q: 为什么玩家分数突然变为 0？**  
A: 通常为 API 异常或昵称变更导致，插件会自动忽略这种异常并记录日志  

**Q: 赛季重置为什么也会提示分数变化？**  
A: 插件已能识别大幅下降为赛季重置并做提醒，不会误判异常  

**Q: 如何获取 API Key？**  
A: 请前往 [Apex Legends API Portal](https://portal.apexlegendsapi.com/) 免费注册并获取  
